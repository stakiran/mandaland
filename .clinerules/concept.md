# マンダランド

## 概要
**マンダランド（Mandaland）** とは、マンダラから構成されるデータ構造である。

## 用語（データ構造）

### マンダラ
**マンダラ（Mandal）** とはマンダラートを由来とした造語であり、3 x 3 の 9 マスのスロットを持っている。

```
[1] [2] [3]
[4] [5] [6]
[7] [8] [9]
```

### マス
マンダラの各スロットを **マス（Mass）** と呼ぶ。

またマンダラの各マスには番号がついており、1,2,3,4,5,6,7,8,9 の 9 つのマスが存在する。たとえばマス1、マス5のように呼称する。

マスと番号は固定されており、左上から時計回りにマス1、マス2、マス3、マス6、マス9、マス8、マス7、マス4となっている。

マスは「内容」と「リンク先」を持っている。内容には 300 文字以内の複数行テキストが入る。リンク先はマンダラを指す。

### コア
**コア** とはマス5のことを指す。

つまりマンダラは 1 つのコアと、8 つのマスを持った構造と言える。典型的にはコアにタイトルを設定し、このタイトルに関する情報を周囲 8 マスに書くといった使い方になる。

なおコアの内容については Readonly であり編集はできない。後述するシンクのとおり、リンク元のマスの内容が同期されるためである。

### マンダランド
**マンダランド** とは、単一のマンダラ、または複数のマンダラがリンクされて繋がった一連の構造を指す。マンダラのコンテナと捉えて良い。

マンダランドは「エントリーポイント」を持つ。

### エントランス
後述する「エントリーポイント」からリンクされているマンダラを **エントランス** と呼ぶ。

## 用語（ポインタ系）

### ポインタ
ここで **ポインタ** とは、特定のマンダラの特定のマスを指すポインタを指す。下記するようにエントリーポイント、カレントポイント、ブックマークポイントなど複数種類のポインタが存在する。ポインタとは、これらの総称を指す。

ポインタは「ポイント先」と「ポインタ名」を持っている。

なおポインタについて言及する際、マンダラを指すように書いていることがあるが、内部的には必ずそのマンダラのマスまで指している。つまり「ポイント先」としては、マンダラとそのマスも含めて保持しなくてはならない。

なおポインタ名は自動抽出であり、`(ポイント先のマンダラのコアの内容)-(ポイント先マスの番号)-(ポイント先マスの内容)` で統一する。ただし内容は長い可能性があるため、先頭10文字にする。つまりポインタ名は長くとも23文字以内になる。

### エントリーポイント
**エントリーポイント** とは、マンダランドの始点をリンクするポインタである。具体的には、始点となるマンダラのコアを指す。コアの内容にはポインタ名をセットする。

### カレントポイント
**カレントポイント** とは、ユーザーが現在開いているマンダラをリンクするポインタである。単に **カレント** と略すこともある。

つまりマンダランドを使うユーザーは、カレントポイントを切り替えながらマンダラを行き来する体験になる。たとえるならカレントディレクトリならぬカレントマンダラと言える。

### ブックマークポイント
***ブックマークポイント** とは、特定のマンダラをリンクするポインタである。その名のとおりお気に入り登録として機能し、ユーザーはあとで自由に呼び出すことで、そのポイント先のマンダラに移動できる。

## 用語（操作）

### リンク
マンダラからマンダラに接続することができる。これを **リンク** という。

リンクは from source to dest の構図であり、source はマス、dest はマンダラである。

各マスは1つのリンクしか持てない。またコアはリンクを持てない。つまりマンダラは最大8つのマンダラにリンクすることができる。

### シンク
**シンク（Sync）** とは同期を意味する言葉で、ある source mass からマンダラ M1 にリンクしたとき、「M1 のコアの内容」が「その source mass の内容」と同じになることを指す。別の言い方をすると、source mass の内容と、リンク先のコアの内容が同期される。

たとえば、ある source mass の内容が「タスクT1に1時間取り組む」だったとして、ここから M1 にリンクした場合、M1 のコアの内容も「タスクT1に1時間取り組む」になる。

### エンター
あるマンダラのマスから新しいマンダラに移ることを **エンター** と呼ぶ。エンターすると、カレントもエンター先に移る。

エンターするとき、マンダラが存在しない場合は新規する。その際、シンクの定義で述べたように、「新規したマンダラのコアの内容」には「リンク元のマスの内容」を入力する。

なお、マスの内容が空のときはエンターできない。またコアからエンターすることもできない。

### リターン
あるマンダラから、リンク元のマンダラに戻ることを **リターン** と呼ぶ。リターンすると、カレントもリターン先に移る。

あるマンダラのリンク元はただ一つであるため、リターンする先も必ず一つである。またリンク元のマスもただ一つであり、リターンするとそのマスがカレントになるはずである。

なお、エントランス上でリターンすることはできない。

### ムーブ
あるマンダラ上で、別のマスにポイントする（カレントを移す）ことを **ムーブ** と呼ぶ。

### ライト
**ライト（Write）** とは、あるマスの内容にテキストを書き込むことである。

通常のテキストエディットと同様、マスの内容にはテキストが保存されており、これを読み書きする。つまりマスの内容が既存ならば、まずそれを読み込んで、それを編集する形にしなければならない。

### ジャンプ
あるマスの内容に URL が記載されている場合に、その URL を開くことを **ジャンプ** という。

マスの内容に URL が無い場合、ジャンプとしては何もしない。また複数の URL が存在する場合は、最初に見つかった URL を開く。

### ブックマーク
今現在カレントがポイントしているマスをブックマークポイントとして追加することを **ブックマーク** という。

### ワープ
指定したブックマークポイントに飛ぶ（カレントを移す）ことを **ワープ** と呼ぶ。

## ユーザーとプロジェクトとマンダランド
利用者のことを **ユーザー** と呼ぶ。

ユーザーには 1 つの **プロジェクト** が与えられる。プロジェクトは n つのマンダランドを持つことができる。

プロジェクトは内部構造であり、ユーザーに意識させる必要はない。ユーザーは単に n つのマンダランドを持つことができる。

